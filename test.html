
    <button onclick="update_gpa()" class = "gpaEntryHolderText" style = "top:30em; left:709px; background-color:yellow;" id="submitGpa">submit</button>

<script>
      function update_gpa(){
        //Validate Password (must be 6-20 characters in len)
        //verifyPassword("click");
        const body = {
           username: getCookie("username"),
          className: "test",
          difficulty: "2",
          hoursOfHw: "2",
          daysBtwTest: "2",
          memorizationLevel: "2",
          comments: "2"
        };
        const requestOptions = {
            method: 'POST',
            body: JSON.stringify(body),
            headers: {
                "content-type": "application/json",
                'Authorization': 'Bearer my-token',
            },
        };

        // URL for Create API
        // Fetch API call to the database to create a new user
        fetch("https://seal.nighthawkcodingsociety.com/api/users/updateclassreview", requestOptions)
          .then(response => {
            // trap error response from Web API
            if (response.status !== 200) {
              const errorMsg = 'Database create error: ' + response.status;
              console.log(errorMsg);
            }
            // response contains valid result
        })
        update_display()
      }

      function read_users() {
        // prepare fetch options
        
        const read_options = {
          method: 'GET', // *GET, POST, PUT, DELETE, etc.
          mode: 'cors', // no-cors, *cors, same-origin
          cache: 'default', // *default, no-cache, reload, force-cache, only-if-cached
          credentials: 'omit', // include, *same-origin, omit
          headers: {
            'Content-Type': 'application/json'
          },
        };

        // fetch the data from API
        fetch("https://seal.nighthawkcodingsociety.com/api/users/gpa", read_options)
          // response is a RESTful "promise" on any successful fetch
          .then(response => {
            // check for response errors
            if (response.status !== 200) {
                const errorMsg = 'Database read error: ' + response.status;
                console.log(errorMsg);
                return;
            }
            // valid response will have json data
            response.json().then(data => {
                console.log(data);
            })
        })
        // catch fetch errors (ie ACCESS to server blocked)
        .catch(err => {
          console.error(err);
        });
      }

      function getCookie(cname) {
        let name = cname + "=";
        let decodedCookie = decodeURIComponent(document.cookie);
        let ca = decodedCookie.split(';');
        for(let i = 0; i <ca.length; i++) {
          let c = ca[i];
          while (c.charAt(0) == ' ') {
            c = c.substring(1);
          }
          if (c.indexOf(name) == 0) {
            return c.substring(name.length, c.length);
          }
        }
        return "";
      }
    
      function update_display() {
        // prepare fetch options
        let username = getCookie("username")
        console.log(username)
        const read_options = {
          method: 'GET', // *GET, POST, PUT, DELETE, etc.
          mode: 'cors', // no-cors, *cors, same-origin
          cache: 'default', // *default, no-cache, reload, force-cache, only-if-cached
          credentials: 'omit', // include, *same-origin, omit
          headers: {
            'Content-Type': 'application/json'
          },
        };

        // fetch the data from API
        fetch("https://seal.nighthawkcodingsociety.com/api/users/gpa", read_options)
          // response is a RESTful "promise" on any successful fetch
          .then(response => {
            // check for response errors
            if (response.status !== 200) {
                const errorMsg = 'Database read error: ' + response.status;
                console.log(errorMsg);
                return;
            }
            // valid response will have json data
            response.json().then(data => {
                console.log("hi") ;
            })
        })
        // catch fetch errors (ie ACCESS to server blocked)
        .catch(err => {
          console.error(err);
        });
      }
    
      function calculate_Average_Weighted() {
        const read_options = {
          method: 'GET', // *GET, POST, PUT, DELETE, etc.
          mode: 'cors', // no-cors, *cors, same-origin
          cache: 'default', // *default, no-cache, reload, force-cache, only-if-cached
          credentials: 'omit', // include, *same-origin, omit
          headers: {
            'Content-Type': 'application/json'
          },
        };

        // fetch the data from API
        fetch("https://seal.nighthawkcodingsociety.com/api/users/gpa", read_options)
          // response is a RESTful "promise" on any successful fetch
          .then(response => {
            // check for response errors
            if (response.status !== 200) {
                const errorMsg = 'Database read error: ' + response.status;
                console.log(errorMsg);
                return;
            }
            // valid response will have json data
            response.json().then(data => {
              let total = 0;
              let count = 0;
              for (let i = 0; i<data.length; i++) {
                    count++;
                    total + data[i]["avg_w_gpa"];
              }
              let average_w = total/count;
              console.log(average_w);
            })
        })
        // catch fetch errors (ie ACCESS to server blocked)
        .catch(err => {
          console.error(err);
        });
      }

      function calculate_Average_Unweighted() {
        const read_options = {
          method: 'GET', // *GET, POST, PUT, DELETE, etc.
          mode: 'cors', // no-cors, *cors, same-origin
          cache: 'default', // *default, no-cache, reload, force-cache, only-if-cached
          credentials: 'omit', // include, *same-origin, omit
          headers: {
            'Content-Type': 'application/json'
          },
        };

        // fetch the data from API
        fetch("https://seal.nighthawkcodingsociety.com/api/users/gpa", read_options)
          // response is a RESTful "promise" on any successful fetch
          .then(response => {
            // check for response errors
            if (response.status !== 200) {
                const errorMsg = 'Database read error: ' + response.status;
                console.log(errorMsg);
                return;
            }
            // valid response will have json data
            response.json().then(data => {
              let total = 0;
              let count = 0;
              for (let i = 0; i<data.length; i++) {
                    count++;
                    total + data[i]["avg_uw_gpa"];
              }
              let average_w = total/count;
              console.log(average_uw);
            })
        })
        // catch fetch errors (ie ACCESS to server blocked)
        .catch(err => {
          console.error(err);
        });
      }
    
    
    </script>